<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nayma - Criar Conta</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos Gerais */
        body { background-color: #000; color: white; font-family: Arial, sans-serif; margin: 0; padding: 0; }
        
        /* Botão Voltar - Flutuante e visível */
        .btn-voltar-inicio {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            color: white;
            text-decoration: none;
            font-weight: bold;
            background: #e50914;
            padding: 12px 20px;
            border-radius: 5px;
            border: 1px solid white;
            transition: 0.3s;
        }
        .btn-voltar-inicio:hover { background: #b20710; transform: scale(1.05); }

        /* Container de Cadastro */
        .cadastro-container { height: 100vh; display: flex; justify-content: center; align-items: center; }
        .cadastro-box { background-color: rgba(20, 20, 20, 0.95); padding: 50px; border-radius: 10px; width: 100%; max-width: 400px; border: 1px solid #333; }
        .logo-nayma { color: #e50914; font-size: 40px; font-weight: bold; text-align: center; margin-bottom: 20px; }
        
        h2 { margin-bottom: 20px; color: white; font-size: 32px; text-align: left; }
        input { width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 5px; border: none; background-color: #333; color: white; font-size: 16px; box-sizing: border-box; }
        
        .btn-registrar { width: 100%; padding: 15px; background-color: #e50914; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 18px; transition: 0.3s; }
        .btn-registrar:hover { background-color: #b20710; }

        #status-msg { color: #00ff00; margin-bottom: 15px; display: none; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

    <a href="index.html" class="btn-voltar-inicio">← Voltar ao Início</a>

    <div class="cadastro-container">
        <div class="cadastro-box">
            <div class="logo-nayma">NAYMA</div>
            <h2>Cadastrar</h2>
            
            <p id="status-msg">Processando...</p>
            
            <form id="form-cadastro" action="https://formspree.io/f/xaqdejbz" method="POST">
                <input type="text" name="nome" id="nome" placeholder="Nome completo" required>
                <input type="email" name="email" id="email-input" placeholder="E-mail" required>
                <input type="password" name="senha" id="senha-input" placeholder="Criar palavra-passe" required>
                
                <button type="submit" class="btn-registrar">Criar Conta</button>
            </form>
            
            <p style="margin-top: 20px; color: #737373;">Já tem conta? <a href="login.html" style="color: white; text-decoration: none; font-weight: bold;">Entrar agora.</a></p>
        </div>
    </div>

    <script>
        const form = document.getElementById('form-cadastro');
        const status = document.getElementById('status-msg');

        form.addEventListener('submit', async function(e) {
            e.preventDefault(); 
            status.style.display = "block";
            status.style.color = "#00ff00";
            status.innerText = "Criando sua conta...";

            const formData = new FormData(form);
            const email = document.getElementById('email-input').value;
            const senha = document.getElementById('senha-input').value;
            const nome = document.getElementById('nome').value;

            try {
                // 1. Envia os dados para o seu e-mail (Formspree)
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                });

                if (response.ok) {
                    // 2. Salva no navegador para o login funcionar
                    let usuarios = JSON.parse(localStorage.getItem('usuarios_nayma') || "[]");
                    
                    // Se cadastrar com seu e-mail, salva como admin
                    const eAdmin = (email === "andson7pontes08@gmail.com");

                    usuarios.push({ 
                        nome: nome, 
                        email: email, 
                        senha: senha, 
                        role: eAdmin ? "admin" : "user" 
                    });

                    localStorage.setItem('usuarios_nayma', JSON.stringify(usuarios));

                    status.innerText = "Conta criada! Redirecionando para o login...";
                    
                    // Espera 2 segundos e vai para a página de login
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 2000);

                } else {
                    status.style.color = "#e50914";
                    status.innerText = "Erro no servidor. Tente novamente.";
                }
            } catch (error) {
                status.style.color = "#e50914";
                status.innerText = "Erro de conexão. Verifique sua internet.";
            }
        });
    </script>
</body>
</html>